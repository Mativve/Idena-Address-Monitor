!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o=n(1),s=n(4);let r,i,a=!1;function c(e,t){let n=6e4,o=36e5,r=864e5,i=new Date(e)-new Date,c=Math.floor(i/r),d=Math.floor(i%r/o),u=Math.floor(i%o/n),l=Math.floor(i%n/1e3),f="";if(f=c+"d ",f+=d+"h ",f+=u+"m ",f+=l+"s",t)if(i<=5e4&&i>0&&!a)a=!0,s.notifyMe({title:"VALIDATION",body:"Validation will start in less than "+l+"s"});else{if(i<0&&i>=-15e5)return"Validation in progress";if(i<-15e5)return"Validation ended<br/><small>check your score!</small>"}return f}function d(){r={data:()=>({addresses:[],name:"",id:""}),created(){o.initAddresses(),this.addresses=o.getAdresses()},mounted(){this.renderAddresses()},methods:{renderAddresses:function(){o.getAdresses().then(e=>{this.addresses=e})},saveData:function(e){if(this.name.length>0&&this.id.length>0)if("0"==this.id[0]&&"x"==this.id[1]){let e={id:this.id,name:this.name};o.addAddress(e),this.name="",this.id="",this.renderAddresses()}else alert("The address is incorrect!");else alert("Name and address cannot be empty!");return e.preventDefault(),!1},removeAddress:function(e){let t=o.returnAddresses()[e];confirm('Do you want delete "'.concat(t.name,'"?'))&&(o.removeAddress(e),o.saveAddresses(),this.renderAddresses())},moreInfo:function(e){alert(e)},toggleInfo:function(e){this.addresses[e].more=!this.addresses[e].more},convertDate:function(e){return e?function(e,t){let n=new Date(e),o=n.getFullYear(),s=n.getMonth()<10?"0"+n.getMonth():n.getMonth(),r=n.getDate()<10?"0"+n.getDate():n.getDate(),i=n.getHours()<10?"0"+n.getHours():n.getHours(),a=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();return"".concat(o,"-").concat(s,"-").concat(r," ").concat(i,":").concat(a," (").concat(c(e,t),")")}(e):"N/D"},dateSince:function(e){return console.log("LAST",e),e?function(e){let t=Date.now()-parseInt(new Date(e).getTime()/1e5),n=Math.floor((new Date-t)/1e3),o=n/31536e3;return o>1?Math.floor(o)+" years ago":(o=n/2592e3,o>1?Math.floor(o)+" months ago":(o=n/86400,o>1?Math.floor(o)+" days ago":(o=n/3600,o>1?Math.floor(o)+" hours ago":(o=n/60,o>1?Math.floor(o)+" minutes ago":Math.floor(n)+" seconds ago"))))}(e):"N/D"}}},Vue.createApp(r).mount("#table")}d(),i={data:()=>({epoch:0,time:"-",timeDate:"-",scoreToInvite:0}),created(){this.getEpochInfo()},mounted(){},methods:{getEpochInfo:function(){fetch("https://api.idena.org/api/epoch/last").then(e=>e.json()).then(e=>{e.result&&(this.epoch=e.result.epoch,this.time=c(e.result.validationTime,!0),setInterval(()=>{this.time=c(e.result.validationTime,!0)},1e3),this.timeDate=new Date(e.result.validationTime).toLocaleString(),this.scoreToInvite=(100*e.result.minScoreForInvite).toFixed(2)+"%")})}}},Vue.createApp(i).mount("#epoch-info"),r={data:()=>({ver:""}),created(){this.ver="0.1"}},Vue.createApp(r).mount("#footer"),i={data:()=>({modal_active:!1}),created(){},mounted(){},methods:{toggleModal:function(){this.modal_active=!this.modal_active},saveFile:function(){o.getAdresses(["id","name"]).then(e=>{console.log(e);let t=JSON.stringify(e),n=new Blob([t],{type:"text/plain"}),o=new Date,s=o.getFullYear(),r=o.getMonth()<10?"0"+o.getMonth():o.getMonth(),i=o.getDate()<10?"0"+o.getDate():o.getDate(),a=o.getHours()<10?"0"+o.getHours():o.getHours(),c=o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes(),d="".concat(s,"_").concat(r,"_").concat(i,"_").concat(a,"_").concat(c);saveAs(n,"iam_"+d+".iam")})},loadFile:function(){let e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",".iam"),e.click(),e.addEventListener("input",(function(e){let t=e.target.files[0];if(t){let e=new FileReader;e.onload=function(e){let t=e.target.result;t&&(o.saveAddresses(JSON.parse(t)),o.initAddresses(),window.location.reload())},e.readAsText(t)}}))}}},Vue.createApp(i).mount("#data-manager")},function(e,t,n){"use strict";n.r(t),n.d(t,"removeAddress",(function(){return i})),n.d(t,"returnAddresses",(function(){return a})),n.d(t,"getAdresses",(function(){return c})),n.d(t,"saveAddresses",(function(){return d})),n.d(t,"loadAddresses",(function(){return u})),n.d(t,"addAddress",(function(){return l})),n.d(t,"initAddresses",(function(){return f}));var o=n(2),s=n(3);let r=[];function i(e){let t=[];r.forEach((n,o)=>{o!=e&&t.push(n)}),r=[],r=t}function a(){return r}async function c(e){if(r){let t=r.map(async t=>await o.getAddressInfo(t).then(n=>{let o=["id","name","balance","stake","lastActivity","online","penalty","totalShortAnswers","score","state","more"],s={};return e&&(o=e),o.includes("id")&&(s.id=t.id),o.includes("name")&&(s.name=t.name),o.includes("more")&&(s.more=!1),n.forEach(e=>{null!=e.result&&Object.keys(e.result).forEach(t=>{if(o.includes(t))switch(s[t]=e.result[t]?e.result[t]:"N/D",t){case"totalShortAnswers":e.result.totalShortAnswers.point&&e.result.totalShortAnswers.flipsCount?s.score=(e.result.totalShortAnswers.point/e.result.totalShortAnswers.flipsCount*100).toFixed(2)+"%":s.score="Candidate";break;case"state":"Undefined"==s[t]&&(s[t]="N/D")}})}),s}));return Promise.all(t)}}function d(e){localStorage.setItem("addresses",JSON.stringify(e||r))}function u(){localStorage.getItem("addresses")||d(),r=JSON.parse(localStorage.getItem("addresses")),c().then(e=>{let t=e.map(e=>({id:e.id,online:!!e.online}));s.initStatuses(t)})}function l(e){if(e.name.length>0&&e.id.length>0&&"0"==e.id[0]&&"x"==e.id[1]){let t=r.find(t=>t.id==e.id);t?alert("Duplicate detected! Current name: "+t.name):(r.push(e),d())}}function f(){u()}},function(e,t,n){"use strict";async function o(e){let{id:t}=e,n=["https://api.idena.org/api/address/".concat(t),"https://api.idena.org/api/identity/".concat(t),"https://api.idena.org/api/onlineidentity/".concat(t)].map(async e=>await fetch(e).then(e=>e.json()));return Promise.all(n)}n.r(t),n.d(t,"getAddressInfo",(function(){return o}))},function(e,t,n){"use strict";n.r(t),n.d(t,"compareStatuses",(function(){return a})),n.d(t,"saveStatuses",(function(){return c})),n.d(t,"loadStatuses",(function(){return d})),n.d(t,"initStatuses",(function(){return u}));var o=n(4);let s=[],r=[],i=new Favico({animation:"slide"});function a(){let e=0;s.length==r.length?(s.forEach((function(t,n){t.online!=r[n].online&&e++})),e>0&&(o.notifyMe({title:"Status change detected",body:"("+e+") account/s status has changed since the last visit. Check them out so you don't lose your iDNAs"}),i.badge(e)),c()):console.log("Current and Saved statuses is not the same!")}function c(){localStorage.setItem("statuses",JSON.stringify(s))}function d(){localStorage.getItem("statuses")?(r=JSON.parse(localStorage.getItem("statuses")),a()):c()}function u(e){s=e,d()}},function(e,t,n){"use strict";function o(e){var t;window.Notification?"granted"===Notification.permission?function(e){console.log("NS");let t=e.title||"",n=e.body||"";new Notification(t,{body:n,icon:"dist/img/icon.png"})}(e):(t=function(e){e.status||console.log(e.msg)},Notification.requestPermission().then((function(e){t("granted"===e?{status:!0,msg:""}:{status:!1,msg:"User blocked notifications."})})).catch((function(e){t({status:!1,msg:"Error"})}))):console.log("Browser does not support notifications.")}n.r(t),n.d(t,"notifyMe",(function(){return o}))}]);
//# sourceMappingURL=main.js.map